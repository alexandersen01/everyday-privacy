---
layout: default
---
{% include components/notification-breach.html %}

{% assign services = site.data.service %}

<h1>Select services you use</h1>
<div class="select-wrapper">
    <section class="select">
        {% for service in services %}
        <label class="service" for="{{ service[1].name | downcase }}-select">
            <input type="checkbox" class="service-checkbox" id="{{ service[1].name | downcase }}-select" value="{{ service[1].name | lowercase }}" name="{{ service[1].name }}" />
            <div class="service-container" >
                <img src="{{ service[1].logo }}" alt="{{ service[1].name }} logo" />
                <h2>{{ service[1].name }}</h2>
            </div>
        </label>
        {% endfor %}
    </section>
    <button class="submit" onclick="setLocalStorageAndRedirect()">Submit</button>
</div>

<script type="text/javascript">
    function getCheckedBoxes(checkboxName) {
        var checkboxes = document.getElementsByClassName(checkboxName);
        var servicesChecked = [];

        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked) {
                servicesChecked.push(checkboxes[i].getAttribute('name'));
            }
        }

        return servicesChecked.length > 0 ? servicesChecked : null;
    }

    function setLocalStorageAndRedirect() {
        var services = getCheckedBoxes('service-checkbox');
        localStorage.setItem('services', JSON.stringify(services));

        location.href = '/my';
    }
</script>
